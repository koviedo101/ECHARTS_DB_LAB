CREATE ALGORITHM=UNDEFINED DEFINER=`renato`@`%` SQL SECURITY DEFINER VIEW `v_detalle_planilla` AS select concat(`v`.`employee_id`,'_',`v`.`fecha`) AS `id`,`v`.`employee_id` AS `employee_id`,`v`.`employee_id` AS `eid`,`v`.`fecha` AS `fecha`,date_format(`v`.`fecha`,'%W %e') AS `fecha_display`,min(month(`v`.`fecha`)) AS `mid`,min(year(`v`.`fecha`)) AS `yid`,group_concat(distinct `p`.`nombre` separator ', ') AS `descripcion`,min(`t`.`inicio`) AS `inicio`,max(`t`.`fin`) AS `fin`,group_concat(distinct `t`.`notas` separator ',') AS `notas`,min(`v`.`cumplido`) AS `cumplido`,min(`v`.`objetivo`) AS `objetivo`,min(`v`.`ordinario`) AS `ordinario`,min(`v`.`extra`) AS `extra`,min(`p`.`id`) AS `project_id` from ((`v_planilla` `v` left join `trabajo` `t` on(((`t`.`employee_id` = `v`.`employee_id`) and (`t`.`fecha` = `v`.`fecha`)))) left join `projects` `p` on((`p`.`id` = `t`.`project_id`))) group by concat(`v`.`employee_id`,'_',`v`.`fecha`),`v`.`employee_id`,`v`.`fecha`,date_format(`v`.`fecha`,'%W %e') order by `v`.`fecha`