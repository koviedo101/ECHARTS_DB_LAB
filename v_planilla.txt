CREATE ALGORITHM=UNDEFINED DEFINER=`renato`@`%` SQL SECURITY DEFINER VIEW `v_planilla` AS select `t`.`employee_id` AS `employee_id`,`t`.`fecha` AS `fecha`,`o`.`objetivo` AS `objetivo`,`o`.`cumplido` AS `cumplido`,(case when (`o`.`cumplido` >= `o`.`objetivo`) then ((`e`.`sueldo` * `o`.`multiplicador_extra`) * `o`.`multiplicador_feriado`) when (`o`.`cumplido` < `o`.`objetivo`) then (((`e`.`sueldo` / 8) * `o`.`cumplido`) * `o`.`multiplicador_feriado`) else 0 end) AS `ordinario`,if((`o`.`cumplido` > `o`.`objetivo`),(((`o`.`cumplido` - `o`.`objetivo`) * (`e`.`sueldo` / 8)) * `e`.`multiplicador_extra`),0) AS `extra` from ((`i_objetivos` `o` left join `trabajo` `t` on(((`t`.`fecha` = `o`.`fecha`) and (`t`.`employee_id` = `o`.`employee_id`)))) left join `trabajadores` `e` on((`t`.`employee_id` = `e`.`id`))) group by `t`.`employee_id`,`t`.`fecha`,`o`.`objetivo`,`o`.`cumplido`,(case when (`o`.`cumplido` >= `o`.`objetivo`) then ((`e`.`sueldo` * `o`.`multiplicador_extra`) * `o`.`multiplicador_feriado`) when (`o`.`cumplido` < `o`.`objetivo`) then (((`e`.`sueldo` / 8) * `o`.`cumplido`) * `o`.`multiplicador_feriado`) else 0 end),if((`o`.`cumplido` > `o`.`objetivo`),(((`o`.`cumplido` - `o`.`objetivo`) * (`e`.`sueldo` / 8)) * `e`.`multiplicador_extra`),0)