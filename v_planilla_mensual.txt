CREATE ALGORITHM=UNDEFINED DEFINER=`renato`@`%` SQL SECURITY DEFINER VIEW `v_planilla_mensual` AS select `e`.`nombre` AS `employee`,`i`.`mes` AS `mid`,`i`.`year` AS `yid`,`i`.`ordinario` AS `ordinario`,`i`.`extra` AS `extras`,(`i`.`ordinario` + `i`.`extra`) AS `subtotal`,ifnull(`ia`.`negativos`,0) AS `ajuste_negativo`,ifnull(`ia`.`positivos`,0) AS `ajuste_positivo`,(((`i`.`ordinario` + `i`.`extra`) + ifnull(`ia`.`positivos`,0)) - ifnull(`ia`.`negativos`,0)) AS `total`,`e`.`id` AS `employee_id`,`e`.`empresa` AS `company_id` from ((`i_sueldos_mensuales` `i` left join `trabajadores` `e` on((`e`.`id` = `i`.`employee_id`))) left join `i_ajustes` `ia` on(((`i`.`mes` = `ia`.`mes`) and (`i`.`year` = `ia`.`year`) and (`i`.`employee_id` = `ia`.`id`))))